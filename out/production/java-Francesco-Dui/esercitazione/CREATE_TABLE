USE SCUOLA;

CREATE TABLE SCUOLA(
	CODICE_MECCANOGRAFICO VARCHAR(50) PRIMARY KEY,
    NOME_SCUOLA VARCHAR(50) NOT NULL,
    INDIRIZZO_SCUOLA VARCHAR(100) NOT NULL,
    TIPOLOGIA_ISTITUTO VARCHAR(30) NOT NULL,
    NUMERO_TELEFONO VARCHAR(15) UNIQUE NOT NULL
);

CREATE TABLE STUDENTE(
	MATRICOLA_STUDENTE VARCHAR(10) PRIMARY KEY,
    NOME_STUDENTE VARCHAR(20) NOT NULL,
    COGNOME_SUDENTE VARCHAR(20) NOT NULL,
    CF_STUDENTE VARCHAR(16) UNIQUE NOT NULL,
    CELLULARE_STUDENTE VARCHAR(15)UNIQUE NOT NULL
);

CREATE TABLE STUDENTE_FREQUENTA_SCUOLA(
    MATRICOLA_STUDENTE VARCHAR(10) NOT NULL,-- PK STUDENTE
	CODICE_MECCANOGRAFICO VARCHAR(50) NOT NULL,-- PK SCUOLA
    DATA_ISCRIZIONE VARCHAR(10)NOT NULL,

    PRIMARY KEY(MATRICOLA_STUDENTE,CODICE_MECCANOGRAFICO),-- PK COMPOSTA

    -- FK STUDENTE
    CONSTRAINT MATRICOLA_STUDENTE_FK FOREIGN KEY (MATRICOLA_STUDENTE)
    REFERENCES STUDENTE(MATRICOLA_STUDENTE) ON UPDATE CASCADE,
    -- FK SCUOLA
    CONSTRAINT CODICE_MECCANOGRAFICO_FK FOREIGN KEY (CODICE_MECCANOGRAFICO)
    REFERENCES SCUOLA(CODICE_MECCANOGRAFICO) ON UPDATE CASCADE
);

INSERT INTO SCUOLA(CODICE_MECCANOGRAFICO,INDIRIZZO_SCUOLA,NOME_SCUOLA,NUMERO_TELEFONO,TIPOLOGIA_ISTITUTO)
VALUES("IT00425896","CORSO PALESTRO 14","ITS ENGIM ARTIGIANELLI","0115689","ITS");

INSERT INTO STUDENTE(CELLULARE_STUDENTE,CF_STUDENTE,NOME_STUDENTE,COGNOME_STUDENTE,MATRICOLA_STUDENTE)
VALUES("3400425896","DTSGS486715","GINO","PIPPO","01");

INSERT INTO studente_frequenta_scuola(CODICE_MECCANOGRAFICO,DATA_ISCRIZIONE,MATRICOLA_STUDENTE)
VALUES("IT00425896","12/04/2023","01");